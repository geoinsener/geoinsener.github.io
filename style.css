/* ========== Base ========== */
:root{
  --bg: #0c3028;
  --muted:#cbd5d1;
  --text:#f7faf9;
  --brand:#3b7a57;
  --brand-600:#2f6246;
  --panel: rgba(255,255,255,.05);
  --ring: 0 0 0 3px rgba(59,122,87,.35);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  line-height:1.6;
  color:var(--text);
  background:var(--bg);
  display:flex;
}

a{color:#B2D8C6; text-decoration:none}
a:hover{text-decoration:underline}
.lead{font-size:1.25rem; opacity:.95}
.small{font-size:.875rem}
.muted{color:var(--muted)}
.balanced{max-width:75ch}

/* Focus */
:focus-visible{outline:none; box-shadow:var(--ring); border-radius:.5rem}

/* ========== Layout ========== */
.sidebar{
  position:fixed; inset:0 auto 0 0; width:260px; padding:1.25rem;
  background:linear-gradient(180deg,var(--brand), var(--brand-600));
  color:white; display:flex; flex-direction:column; gap:1rem; z-index:10;
}
.brand{display:flex; align-items:center; gap:.75rem; padding:.5rem .25rem}
.logo{display:inline-grid; place-items:center; width:40px; height:40px;
  border-radius:10px; background:rgba(255,255,255,.15); font-weight:700}
.brand-text small{opacity:.85}

.sidebar nav ul{list-style:none; padding:0; margin:1rem 0;}
.sidebar nav li{margin:.5rem 0}
.sidebar a{color:white; font-weight:600}
.sidebar a:hover{opacity:.9}

.language-switch{margin-top:auto; display:flex; gap:.5rem; align-items:center}
.language-switch button{
  background:rgba(255,255,255,.15); color:#fff; border:0; padding:.4rem .6rem;
  border-radius:.5rem; cursor:pointer
}
.language-switch button[aria-pressed="true"]{background:#fff; color:#1b1b1b}

.content{margin-left:260px; flex:1; min-width:0}

/* ========== Hero (CSS-only background, copyright-safe) ========== */
.hero{position:relative; min-height:72vh; display:grid; place-items:center; text-align:center; overflow:hidden}
.hero-pattern{
  position:absolute; inset:0; z-index:0;
  background:
    linear-gradient(rgba(11,15,13,.45), rgba(11,15,13,.45)),
    url('hero-bg-combined.jpg') center / cover no-repeat;
  background-blend-mode: multiply, normal;
  filter: saturate(.95) contrast(.95) brightness(.9);
}
.hero::before{
  content:''; position:absolute; inset:-200% -200% 0 -200%; opacity:.22;
  background-image: linear-gradient(transparent 95%, rgba(255,255,255,.15) 95%);
  background-size: 40px 40px; /* subtle grid */
  transform: rotate(3deg);
}
.hero-inner{position:relative; z-index:1; padding:3rem 1rem}
.hero h1{font-size:clamp(2.2rem,6vw,4rem); margin:0 0 .5rem}
.cta{
  display:inline-block; margin-top:1.25rem;
  padding:.8rem 1.2rem; border-radius:.9rem; background:var(--brand); color:#fff;
  font-weight:700; text-decoration:none; border:1px solid rgba(255,255,255,.15);
}
.cta:hover{background:var(--brand-600)}

/* ========== Sections ========== */
.section{padding:3rem 1rem}
.container{max-width:1100px; margin:0 auto}
.about details{margin-top:1rem; background:var(--panel); padding:1rem; border-radius:1rem}
.about summary{cursor:pointer; font-weight:700}

/* Services */
.service-list{display:grid; gap:1rem; grid-template-columns:repeat(2,minmax(0,1fr)); margin:1rem 0 0; list-style: none; padding-left: 0}
.service-list li{background:var(--panel); padding:1.25rem; border-radius:1rem; border:1px solid rgba(255,255,255,.06)}

/* References */
.references .ref-grid{margin:1.5rem 0}
.ref-list{columns:2; column-gap:2rem; padding-left:1rem}
.ref-list li{break-inside:avoid; margin:.25rem 0}
@media (max-width: 900px){.ref-list{columns:1}}

/* Contact */
.contact-grid{display:grid; gap:1.5rem; grid-template-columns:1.1fr .9fr; align-items:start}
.contact-card{display:flex; gap:1rem; background:var(--panel); padding:1rem; border-radius:1rem; align-items:center}
.contact-photo{width:120px; height:120px; border-radius:999px; object-fit:cover; border:2px solid rgba(255,255,255,.5)}
.contact-form{background:var(--panel); padding:1rem; border-radius:1rem; display:grid; gap:.75rem}
.contact-form label{display:grid; gap:.35rem}
.contact-form input,.contact-form textarea{
  width:100%; padding:.7rem .8rem; border-radius:.6rem; border:1px solid rgba(255,255,255,.18);
  background:rgba(255,255,255,.06); color:var(--text)
}
.contact-form button{justify-self:start}

/* Footer */
.footer{padding:2rem 1rem; background:rgba(255,255,255,.04); border-top:1px solid rgba(255,255,255,.06); margin-top:2rem}

/* Skip link */
.skip-link{position:absolute; left:-999px; top:auto; width:1px; height:1px; overflow:hidden}
.skip-link:focus{left:1rem; top:1rem; width:auto; height:auto; padding:.5rem .75rem; background:#fff; color:#000; border-radius:.5rem}

/* Responsive */
@media (max-width: 960px){
  .content{margin-left:0}
  .sidebar{position:sticky; top:0; width:100%; flex-direction:row; align-items:center; justify-content:space-between}
  .sidebar nav ul{display:flex; gap:1rem; margin:0}
  .service-list{grid-template-columns:1fr}
  .contact-grid{grid-template-columns:1fr}
}


@media (max-width: 900px){
  .illustrations .img-grid{grid-template-columns:1fr}
}


/* === Mobile nav === */
.menu-toggle{
  display:none;
  background:rgba(255,255,255,.15);
  color:#fff; border:0; padding:.55rem .75rem; border-radius:.6rem; cursor:pointer;
}
@media (max-width: 960px){
  .menu-toggle{display:inline-block}
  .sidebar{gap:.75rem}
  /* collapse nav */
  #main-nav{position:relative}
  .sidebar nav ul{
    display:none;
    position:absolute;
    top:100%; left:0; right:0;
    margin-top:.5rem;
    background:rgba(0,0,0,.55);
    border:1px solid rgba(255,255,255,.15);
    border-radius:.75rem;
    padding:.5rem;
    flex-direction:column;
    backdrop-filter:saturate(110%) blur(6px);
  }
  .sidebar[data-open="true"] nav ul{display:flex}
  .sidebar nav a{padding:.5rem .6rem; border-radius:.5rem; display:block}
  .sidebar nav a:focus-visible, .sidebar nav a:hover{background:rgba(255,255,255,.1)}
}


/* === Mobile text wrapping fix === */
@media (max-width: 600px){
  .content, .section, .about, .services, .references {
    max-width: 100% !important;
    padding: 0 1rem !important;
  }
  p, li {
    word-break: normal;
    white-space: normal;
  }
}


/* === Mobile text width & layout fixes === */
@media (max-width: 600px){
  /* Make all common content wrappers full-width and stacked */
  .layout, .container, .main, .content, .section, .about, .services, .references,
  .hero, .hero-inner, .split, .two-col, .grid, .row, .cols { 
    max-width: 100% !important;
    width: 100% !important;
    display: block !important;
  }
  /* If any wrappers use flex/grid, stack them in one column */
  .split, .two-col, .grid, .row, .cols {
    grid-template-columns: 1fr !important;
    grid-auto-flow: row !important;
    flex-direction: column !important;
    gap: 1rem !important;
  }
  /* Ensure paragraphs and list items flow normally */
  p, li {
    white-space: normal !important;
    word-break: normal !important;
    overflow-wrap: anywhere;
    line-height: 1.5;
  }
  /* Make list markers outside and add padding for readability */
  ul, ol {
    list-style-position: outside;
    padding-left: 1.25rem;
  }
  /* Reset 'li' display in case it was changed */
  li { display: list-item !important; }
  /* Images scale down on small screens */
  img { max-width: 100%; height: auto; }
}


/* Ensure paragraphs using .balanced take full width on small screens */
@media (max-width: 900px){
  .balanced{max-width: 100% !important;}
  p, li { letter-spacing: normal; word-spacing: normal; hyphens: auto; }
}


/* === Mobile vertical-wrap + nav fixes === */
@media (max-width: 900px){
  /* Force normal horizontal writing and prevent char-by-char wrapping */
  h1,h2,h3,h4,h5,h6,p,li,a,span{ 
    writing-mode: horizontal-tb !important; 
    text-orientation: mixed !important; 
  }
  p, li{
    white-space: normal !important;
    word-break: keep-all !important;
    overflow-wrap: normal !important;
  }

  /* Navigation: keep labels on a single line and remove bullets */
  .sidebar nav ul{ list-style: none !important; padding-left: 0 !important; }
  .sidebar nav a{ white-space: nowrap !important; }

  /* Ensure about/hero content isn't constrained to a tiny column */
  .about, .about .container, .about .text,
  .section, .section .container, .content, .content .container,
  .hero, .hero-inner{
    max-width: 100% !important;
    width: 100% !important;
    display: block !important;
  }
}


/* === Strong mobile safeguards for vertical text === */
@media (max-width: 900px){
  /* Force nav items inline, horizontal, and with natural wrapping */
  .sidebar nav ul{display:flex !important; flex-wrap:wrap !important; list-style:none !important; padding-left:0 !important; align-items:center}
  .sidebar nav li{display:inline-flex !important; margin:0 .5rem .5rem 0 !important}
  .sidebar nav a{
    display:inline-block !important;
    writing-mode: horizontal-tb !important;
    white-space:nowrap !important;
    word-break: keep-all !important;
    text-transform:none !important;
  }

  /* Ensure common text blocks render as normal paragraphs */
  .section p, .section .balanced, .about p, .about .balanced, .hero p{
    display:block !important;
    max-width: 75ch !important;
    writing-mode: horizontal-tb !important;
    white-space: normal !important;
    word-break: normal !important;
    overflow-wrap: anywhere !important;
  }

  /* Prevent overly narrow columns */
  .section .container, .about .container{
    display:block !important;
    width:100% !important;
    max-width:calc(100% - 2rem) !important;
    margin-inline:auto !important;
  }
}


/* === Mobile: turn sidebar into top bar === */
@media (max-width: 960px){
  .sidebar{
    position: sticky !important;
    top: 0; inset: 0 0 auto 0 !important;
    width: 100% !important; height: auto !important;
    flex-direction: row !important; align-items: center !important; justify-content: flex-start !important;
    padding: .75rem 1rem !important;
  }
  .content{ margin-left: 0 !important; }
  /* keep space under sticky header */
  #main{ scroll-margin-top: 64px; }
}
